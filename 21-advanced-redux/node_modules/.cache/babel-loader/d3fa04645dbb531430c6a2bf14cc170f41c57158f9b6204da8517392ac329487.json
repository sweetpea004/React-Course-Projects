{"ast":null,"code":"import{uiActions}from\"./ui-slice\";import{cartActions}from\"./cart-slice\";export const fetchCartData=()=>{return async dispatch=>{const fetchData=async()=>{const response=await fetch('https://react-projects-21-adv-redux-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json');if(!response.ok){throw new Error('Could not fetch cart data!');}const data=await response.json();return data;};try{const cartData=await fetchData();dispatch(cartActions.replaceCart({items:cartData.items||[],totalQuantity:cartData.totalQuantity}));}catch(error){dispatch(uiActions.showNotification({status:'error',title:'Error!',message:'Fetching cart data failed.'}));}};};export const sendCartData=cart=>{return async dispatch=>{dispatch(uiActions.showNotification({status:'pending',title:'Sending...',message:'Sending cart data!'}));const sendRequest=async()=>{const response=await fetch('https://react-projects-21-adv-redux-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json',{method:'PUT',body:JSON.stringify({items:cart.items,totalQuantity:cart.totalQuantity})});if(!response.ok){throw new Error('Sending cart data failed.');}};try{await sendRequest();dispatch(uiActions.showNotification({status:'success',title:'Success!',message:'Sent cart data'}));}catch(error){dispatch(uiActions.showNotification({status:'error',title:'Error!',message:'Sending cart data failed.'}));}};};","map":{"version":3,"names":["uiActions","cartActions","fetchCartData","dispatch","fetchData","response","fetch","ok","Error","data","json","cartData","replaceCart","items","totalQuantity","error","showNotification","status","title","message","sendCartData","cart","sendRequest","method","body","JSON","stringify"],"sources":["C:/Users/Computer/Documents/React Projects/React-Course-Projects/21-advanced-redux/src/store/cart-actions.js"],"sourcesContent":["import { uiActions } from \"./ui-slice\";\r\nimport { cartActions } from \"./cart-slice\";\r\n\r\nexport const fetchCartData = () => {\r\n    return async dispatch => {\r\n        const fetchData = async () => {\r\n            const response = await fetch(\r\n                'https://react-projects-21-adv-redux-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json'\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Could not fetch cart data!');\r\n            }\r\n\r\n            const data = await response.json();\r\n            return data;\r\n        };\r\n\r\n        try {\r\n            const cartData = await fetchData();\r\n            dispatch(cartActions.replaceCart({\r\n                items: cartData.items || [],\r\n                totalQuantity: cartData.totalQuantity,\r\n            }));\r\n        } catch (error) {\r\n            dispatch(uiActions.showNotification({\r\n                status: 'error',\r\n                title: 'Error!',\r\n                message: 'Fetching cart data failed.',\r\n            }));\r\n        }\r\n    };\r\n};\r\n\r\nexport const sendCartData = (cart) => {\r\n    return async (dispatch) => {\r\n        dispatch(uiActions.showNotification({\r\n            status: 'pending',\r\n            title: 'Sending...',\r\n            message: 'Sending cart data!',\r\n        }));\r\n\r\n        const sendRequest = async () => {\r\n            const response = await fetch('https://react-projects-21-adv-redux-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json', { \r\n                method: 'PUT', \r\n                body: JSON.stringify({\r\n                    items: cart.items, \r\n                    totalQuantity: cart.totalQuantity,\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Sending cart data failed.');\r\n            }\r\n        };\r\n\r\n        try {\r\n            await sendRequest();\r\n\r\n            dispatch(uiActions.showNotification({\r\n                status: 'success',\r\n                title: 'Success!',\r\n                message: 'Sent cart data',\r\n            }));\r\n        } catch (error) {\r\n            dispatch(uiActions.showNotification({\r\n                status: 'error',\r\n                title: 'Error!',\r\n                message: 'Sending cart data failed.',\r\n            }));\r\n        }\r\n    };\r\n};"],"mappings":"AAAA,OAASA,SAAS,KAAQ,YAAY,CACtC,OAASC,WAAW,KAAQ,cAAc,CAE1C,MAAO,MAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC/B,MAAO,MAAM,CAAAC,QAAQ,EAAI,CACrB,KAAM,CAAAC,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CACxB,iGACJ,CAAC,CAED,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,4BAA4B,CAAC,CACjD,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAD,IAAI,CACf,CAAC,CAED,GAAI,CACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAP,SAAS,CAAC,CAAC,CAClCD,QAAQ,CAACF,WAAW,CAACW,WAAW,CAAC,CAC7BC,KAAK,CAAEF,QAAQ,CAACE,KAAK,EAAI,EAAE,CAC3BC,aAAa,CAAEH,QAAQ,CAACG,aAC5B,CAAC,CAAC,CAAC,CACP,CAAE,MAAOC,KAAK,CAAE,CACZZ,QAAQ,CAACH,SAAS,CAACgB,gBAAgB,CAAC,CAChCC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,4BACb,CAAC,CAAC,CAAC,CACP,CACJ,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAAC,YAAY,CAAIC,IAAI,EAAK,CAClC,MAAO,MAAO,CAAAlB,QAAQ,EAAK,CACvBA,QAAQ,CAACH,SAAS,CAACgB,gBAAgB,CAAC,CAChCC,MAAM,CAAE,SAAS,CACjBC,KAAK,CAAE,YAAY,CACnBC,OAAO,CAAE,oBACb,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAjB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,iGAAiG,CAAE,CAC5HiB,MAAM,CAAE,KAAK,CACbC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBb,KAAK,CAAEQ,IAAI,CAACR,KAAK,CACjBC,aAAa,CAAEO,IAAI,CAACP,aACxB,CAAC,CACL,CAAC,CAAC,CAEF,GAAI,CAACT,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAChD,CACJ,CAAC,CAED,GAAI,CACA,KAAM,CAAAc,WAAW,CAAC,CAAC,CAEnBnB,QAAQ,CAACH,SAAS,CAACgB,gBAAgB,CAAC,CAChCC,MAAM,CAAE,SAAS,CACjBC,KAAK,CAAE,UAAU,CACjBC,OAAO,CAAE,gBACb,CAAC,CAAC,CAAC,CACP,CAAE,MAAOJ,KAAK,CAAE,CACZZ,QAAQ,CAACH,SAAS,CAACgB,gBAAgB,CAAC,CAChCC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,2BACb,CAAC,CAAC,CAAC,CACP,CACJ,CAAC,CACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}